#!/bin/bash

echo "üöÄ STEP 2: Railway.app Deployment Guide"
echo "========================================"
echo ""

echo "üìã Prerequisites Check:"
echo "‚úÖ Code pushed to GitHub"
echo "‚úÖ Railway.json configured"
echo "‚úÖ Server.js updated for production"
echo "‚úÖ Environment files created"
echo ""

echo "üåê RAILWAY DEPLOYMENT STEPS:"
echo ""

echo "1Ô∏è‚É£ CREATE RAILWAY PROJECT:"
echo "   ‚Ä¢ Go to https://railway.app"
echo "   ‚Ä¢ Click 'New Project'"
echo "   ‚Ä¢ Select 'Deploy from GitHub repo'"
echo "   ‚Ä¢ Choose your 'chat-app' repository"
echo "   ‚Ä¢ Railway will detect Node.js app automatically"
echo ""

echo "2Ô∏è‚É£ ADD MONGODB DATABASE:"
echo "   ‚Ä¢ In Railway dashboard, click '+ New Service'"
echo "   ‚Ä¢ Select 'Database' ‚Üí 'MongoDB'"
echo "   ‚Ä¢ Railway will create a MongoDB instance"
echo "   ‚Ä¢ Copy the connection string from Database tab"
echo ""

echo "3Ô∏è‚É£ CONFIGURE ENVIRONMENT VARIABLES:"
echo "   ‚Ä¢ Go to your service ‚Üí 'Variables' tab"
echo "   ‚Ä¢ Add these variables:"
echo ""
echo "   üîπ Required Variables:"
echo "   NODE_ENV=production"
echo "   PORT=\$PORT (Railway sets this automatically)"
echo "   MONGO_URL=[Copy from MongoDB service]"
echo "   JWT_SECRET=your-super-secure-jwt-secret-key-here"
echo ""
echo "   üîπ Email Variables (for OTP features):"
echo "   EMAIL_USER=your-email@gmail.com"
echo "   EMAIL_PASS=your-app-password"
echo ""
echo "   üîπ Frontend Variables (if serving separately):"
echo "   REACT_APP_API_URL=https://your-app.railway.app"
echo "   REACT_APP_SOCKET_URL=https://your-app.railway.app"
echo "   REACT_APP_LOCALHOST_KEY=chat-app-current-user"
echo "   REACT_APP_DEMO_MODE=true"
echo ""

echo "4Ô∏è‚É£ DEPLOY THE APPLICATION:"
echo "   ‚Ä¢ Railway will auto-deploy when you push to GitHub"
echo "   ‚Ä¢ Monitor deployment in 'Deployments' tab"
echo "   ‚Ä¢ Check logs for any errors"
echo ""

echo "5Ô∏è‚É£ TEST THE DEPLOYMENT:"
echo "   ‚Ä¢ Visit your Railway app URL"
echo "   ‚Ä¢ Test user registration/login"
echo "   ‚Ä¢ Test real-time messaging"
echo "   ‚Ä¢ Test file uploads"
echo "   ‚Ä¢ Test video calls"
echo ""

echo "6Ô∏è‚É£ SEED DEMO DATA (Optional):"
echo "   ‚Ä¢ SSH into Railway container or"
echo "   ‚Ä¢ Add seed endpoint to create demo users"
echo ""

echo "üéØ POST-DEPLOYMENT CHECKLIST:"
echo "‚ñ° App loads correctly"
echo "‚ñ° User registration works"
echo "‚ñ° Real-time messaging works"
echo "‚ñ° File uploads work"
echo "‚ñ° Video calls connect"
echo "‚ñ° Database persists data"
echo "‚ñ° Demo accounts created"
echo ""

echo "üìù UPDATE README WITH LIVE URL:"
echo "Once deployed, update your README.md with:"
echo "‚Ä¢ Live Demo URL: https://your-app.railway.app"
echo "‚Ä¢ Demo credentials"
echo "‚Ä¢ Any known limitations"
echo ""

echo "üîß TROUBLESHOOTING:"
echo "‚Ä¢ Check Railway logs for errors"
echo "‚Ä¢ Verify all environment variables are set"
echo "‚Ä¢ Ensure MongoDB connection string is correct"
echo "‚Ä¢ Check CORS settings for production domain"
echo ""

echo "‚úÖ Your ChatFlow app will be production-ready!"
echo "üìß Ready for interviewer demo access!"
